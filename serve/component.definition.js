(function(){"use strict";var io=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Jn={exports:{}};(function(fo,Qo){(function($e,yr){fo.exports=yr()})(typeof self<"u"?self:io,function(){return function($e){var yr={};function G(q){if(yr[q])return yr[q].exports;var rr=yr[q]={i:q,l:!1,exports:{}};return $e[q].call(rr.exports,rr,rr.exports,G),rr.l=!0,rr.exports}return G.m=$e,G.c=yr,G.d=function(q,rr,lr){G.o(q,rr)||Object.defineProperty(q,rr,{enumerable:!0,get:lr})},G.r=function(q){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(q,"__esModule",{value:!0})},G.t=function(q,rr){if(1&rr&&(q=G(q)),8&rr||4&rr&&typeof q=="object"&&q&&q.__esModule)return q;var lr=Object.create(null);if(G.r(lr),Object.defineProperty(lr,"default",{enumerable:!0,value:q}),2&rr&&typeof q!="string")for(var _r in q)G.d(lr,_r,function(Ge){return q[Ge]}.bind(null,_r));return lr},G.n=function(q){var rr=q&&q.__esModule?function(){return q.default}:function(){return q};return G.d(rr,"a",rr),rr},G.o=function(q,rr){return{}.hasOwnProperty.call(q,rr)},G.p="",G(G.s=0)}([function($e,yr,G){G.r(yr),G.d(yr,"PopupOpenError",function(){return yo}),G.d(yr,"create",function(){return Lo}),G.d(yr,"destroy",function(){return Uo}),G.d(yr,"destroyComponents",function(){return _t}),G.d(yr,"destroyAll",function(){return Jt}),G.d(yr,"PROP_TYPE",function(){return J}),G.d(yr,"PROP_SERIALIZATION",function(){return wn}),G.d(yr,"CONTEXT",function(){return Fr}),G.d(yr,"EVENT",function(){return Y});function q(r,n){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(r,n)}function rr(r,n){r.prototype=Object.create(n.prototype),r.prototype.constructor=r,q(r,n)}function lr(){return(lr=Object.assign||function(r){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var t in e)({}).hasOwnProperty.call(e,t)&&(r[t]=e[t])}return r}).apply(this,arguments)}function _r(r){try{if(!r)return!1;if(typeof Promise<"u"&&r instanceof Promise)return!0;if(typeof window<"u"&&typeof window.Window=="function"&&r instanceof window.Window||typeof window<"u"&&typeof window.constructor=="function"&&r instanceof window.constructor)return!1;var n={}.toString;if(n){var e=n.call(r);if(e==="[object Window]"||e==="[object global]"||e==="[object DOMWindow]")return!1}if(typeof r.then=="function")return!0}catch{return!1}return!1}var Ge=[],We=[],pn=0,Se;function $n(){if(!pn&&Se){var r=Se;Se=null,r.resolve()}}function mn(){pn+=1}function Re(){pn-=1,$n()}var w=function(){function r(e){var t=this;if(this.resolved=void 0,this.rejected=void 0,this.errorHandled=void 0,this.value=void 0,this.error=void 0,this.handlers=void 0,this.dispatching=void 0,this.stack=void 0,this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],e){var o,i,a=!1,c=!1,d=!1;mn();try{e(function(s){d?t.resolve(s):(a=!0,o=s)},function(s){d?t.reject(s):(c=!0,i=s)})}catch(s){Re(),this.reject(s);return}Re(),d=!0,a?this.resolve(o):c&&this.reject(i)}}var n=r.prototype;return n.resolve=function(e){if(this.resolved||this.rejected)return this;if(_r(e))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=e,this.dispatch(),this},n.reject=function(e){var t=this;if(this.resolved||this.rejected)return this;if(_r(e))throw new Error("Can not reject promise with another promise");if(!e){var o=e&&typeof e.toString=="function"?e.toString():{}.toString.call(e);e=new Error("Expected reject to be called with Error, got "+o)}return this.rejected=!0,this.error=e,this.errorHandled||setTimeout(function(){t.errorHandled||function(i,a){if(Ge.indexOf(i)===-1){Ge.push(i),setTimeout(function(){throw i},1);for(var c=0;c<We.length;c++)We[c](i,a)}}(e,t)},1),this.dispatch(),this},n.asyncReject=function(e){return this.errorHandled=!0,this.reject(e),this},n.dispatch=function(){var e=this.resolved,t=this.rejected,o=this.handlers;if(!this.dispatching&&(e||t)){this.dispatching=!0,mn();for(var i=function(l,p){return l.then(function(y){p.resolve(y)},function(y){p.reject(y)})},a=0;a<o.length;a++){var c=o[a],d=c.onSuccess,s=c.onError,h=c.promise,u=void 0;if(e)try{u=d?d(this.value):this.value}catch(l){h.reject(l);continue}else if(t){if(!s){h.reject(this.error);continue}try{u=s(this.error)}catch(l){h.reject(l);continue}}if(u instanceof r&&(u.resolved||u.rejected)){var f=u;f.resolved?h.resolve(f.value):h.reject(f.error),f.errorHandled=!0}else _r(u)?u instanceof r&&(u.resolved||u.rejected)?u.resolved?h.resolve(u.value):h.reject(u.error):i(u,h):h.resolve(u)}o.length=0,this.dispatching=!1,Re()}},n.then=function(e,t){if(e&&typeof e!="function"&&!e.call)throw new Error("Promise.then expected a function for success handler");if(t&&typeof t!="function"&&!t.call)throw new Error("Promise.then expected a function for error handler");var o=new r;return this.handlers.push({promise:o,onSuccess:e,onError:t}),this.errorHandled=!0,this.dispatch(),o},n.catch=function(e){return this.then(void 0,e)},n.finally=function(e){if(e&&typeof e!="function"&&!e.call)throw new Error("Promise.finally expected a function");return this.then(function(t){return r.try(e).then(function(){return t})},function(t){return r.try(e).then(function(){throw t})})},n.timeout=function(e,t){var o=this;if(this.resolved||this.rejected)return this;var i=setTimeout(function(){o.resolved||o.rejected||o.reject(t||new Error("Promise timed out after "+e+"ms"))},e);return this.then(function(a){return clearTimeout(i),a})},n.toPromise=function(){if(typeof Promise>"u")throw new TypeError("Could not find Promise");return Promise.resolve(this)},n.lazy=function(){return this.errorHandled=!0,this},r.resolve=function(e){return e instanceof r?e:_r(e)?new r(function(t,o){return e.then(t,o)}):new r().resolve(e)},r.reject=function(e){return new r().reject(e)},r.asyncReject=function(e){return new r().asyncReject(e)},r.all=function(e){var t=new r,o=e.length,i=[].slice();if(!o)return t.resolve(i),t;for(var a=function(s,h,u){return h.then(function(f){i[s]=f,(o-=1)==0&&t.resolve(i)},function(f){u.reject(f)})},c=0;c<e.length;c++){var d=e[c];if(d instanceof r){if(d.resolved){i[c]=d.value,o-=1;continue}}else if(!_r(d)){i[c]=d,o-=1;continue}a(c,r.resolve(d),t)}return o===0&&t.resolve(i),t},r.hash=function(e){var t={},o=[],i=function(c){if(e.hasOwnProperty(c)){var d=e[c];_r(d)?o.push(d.then(function(s){t[c]=s})):t[c]=d}};for(var a in e)i(a);return r.all(o).then(function(){return t})},r.map=function(e,t){return r.all(e.map(t))},r.onPossiblyUnhandledException=function(e){return function(t){return We.push(t),{cancel:function(){We.splice(We.indexOf(t),1)}}}(e)},r.try=function(e,t,o){if(e&&typeof e!="function"&&!e.call)throw new Error("Promise.try expected a function");var i;mn();try{i=e.apply(t,o||[])}catch(a){return Re(),r.reject(a)}return Re(),r.resolve(i)},r.delay=function(e){return new r(function(t){setTimeout(t,e)})},r.isPromise=function(e){return!!(e&&e instanceof r)||_r(e)},r.flush=function(){return function(e){var t=Se=Se||new e;return $n(),t}(r)},r}();function Ne(r){return{}.toString.call(r)==="[object RegExp]"}var Ze={IFRAME:"iframe",POPUP:"popup"},se=`Call was rejected by callee.\r
`;function Gn(r){return r===void 0&&(r=window),r.location.protocol}function Zn(r){if(r===void 0&&(r=window),r.mockDomain){var n=r.mockDomain.split("//")[0];if(n)return n}return Gn(r)}function Yn(r){return r===void 0&&(r=window),Zn(r)==="about:"}function Jr(r){if(r===void 0&&(r=window),r)try{if(r.parent&&r.parent!==r)return r.parent}catch{}}function Ee(r){if(r===void 0&&(r=window),r&&!Jr(r))try{return r.opener}catch{}}function Ye(r){try{return!0}catch{}return!1}function Ve(r){r===void 0&&(r=window);var n=r.location;if(!n)throw new Error("Can not read window location");var e=Gn(r);if(!e)throw new Error("Can not read window protocol");if(e==="file:")return"file://";if(e==="about:"){var t=Jr(r);return t&&Ye()?Ve(t):"about://"}var o=n.host;if(!o)throw new Error("Can not read window host");return e+"//"+o}function X(r){r===void 0&&(r=window);var n=Ve(r);return n&&r.mockDomain&&r.mockDomain.indexOf("mock:")===0?r.mockDomain:n}function hr(r){if(!function(n){try{if(n===window)return!0}catch{}try{var e=Object.getOwnPropertyDescriptor(n,"location");if(e&&e.enumerable===!1)return!1}catch{}try{if(Yn(n)&&Ye())return!0}catch{}try{if(function(t){return t===void 0&&(t=window),Zn(t)==="mock:"}(n)&&Ye())return!0}catch{}try{if(Ve(n)===Ve(window))return!0}catch{}return!1}(r))return!1;try{if(r===window||Yn(r)&&Ye()||X(window)===X(r))return!0}catch{}return!1}function Vr(r){if(!hr(r))throw new Error("Expected window to be same domain");return r}function Vn(r,n){if(!r||!n)return!1;var e=Jr(n);return e?e===r:function(t){var o=[];try{for(;t.parent!==t;)o.push(t.parent),t=t.parent}catch{}return o}(n).indexOf(r)!==-1}function Xe(r){var n=[],e;try{e=r.frames}catch{e=r}var t;try{t=e.length}catch{}if(t===0)return n;if(t){for(var o=0;o<t;o++){var i=void 0;try{i=e[o]}catch{continue}n.push(i)}return n}for(var a=0;a<100;a++){var c=void 0;try{c=e[a]}catch{return n}if(!c)return n;n.push(c)}return n}function Ke(r){for(var n=[],e=0,t=Xe(r);e<t.length;e++){var o=t[e];n.push(o);for(var i=0,a=Ke(o);i<a.length;i++)n.push(a[i])}return n}function Pe(r){r===void 0&&(r=window);try{if(r.top)return r.top}catch{}if(Jr(r)===r)return r;try{if(Vn(window,r)&&window.top)return window.top}catch{}try{if(Vn(r,window)&&window.top)return window.top}catch{}for(var n=0,e=Ke(r);n<e.length;n++){var t=e[n];try{if(t.top)return t.top}catch{}if(Jr(t)===t)return t}}function be(r){var n=Pe(r);if(!n)throw new Error("Can not determine top window");var e=[].concat(Ke(n),[n]);return e.indexOf(r)===-1&&(e=[].concat(e,[r],Ke(r))),e}var Te=[],gn=[];function Cr(r,n){n===void 0&&(n=!0);try{if(r===window)return!1}catch{return!0}try{if(!r)return!0}catch{return!0}try{if(r.closed)return!0}catch(o){return!o||o.message!==se}if(n&&hr(r))try{if(r.mockclosed)return!0}catch{}try{if(!r.parent||!r.top)return!0}catch{}var e=function(o,i){for(var a=0;a<o.length;a++)try{if(o[a]===i)return a}catch{}return-1}(Te,r);if(e!==-1){var t=gn[e];if(t&&function(o){if(!o.contentWindow||!o.parentNode)return!0;var i=o.ownerDocument;if(i&&i.documentElement&&!i.documentElement.contains(o)){for(var a=o;a.parentNode&&a.parentNode!==a;)a=a.parentNode;if(!a.host||!i.documentElement.contains(a.host))return!0}return!1}(t))return!0}return!1}function Xn(r,n){for(var e=Xe(r),t=0;t<e.length;t++){var o=e[t];try{if(hr(o)&&o.name===n&&e.indexOf(o)!==-1)return o}catch{}}try{if(e.indexOf(r.frames[n])!==-1)return r.frames[n]}catch{}try{if(e.indexOf(r[n])!==-1)return r[n]}catch{}}function Ie(r){return r===void 0&&(r=window),Ee(r=r||window)||Jr(r)||void 0}function yn(r,n){for(var e=0;e<r.length;e++)for(var t=r[e],o=0;o<n.length;o++)if(t===n[o])return!0;return!1}function En(r){r===void 0&&(r=window);for(var n=0,e=r;e;)(e=Jr(e))&&(n+=1);return n}function Kn(r,n){var e=Pe(r)||r,t=Pe(n)||n;try{if(e&&t)return e===t}catch{}var o=be(r),i=be(n);if(yn(o,i))return!0;var a=Ee(e),c=Ee(t);return a&&yn(be(a),i)||c&&yn(be(c),o),!1}function $r(r,n){if(typeof r=="string"){if(typeof n=="string")return r==="*"||n===r;if(Ne(n)||Array.isArray(n))return!1}return Ne(r)?Ne(n)?r.toString()===n.toString():!Array.isArray(n)&&Boolean(n.match(r)):!!Array.isArray(r)&&(Array.isArray(n)?JSON.stringify(r)===JSON.stringify(n):!Ne(n)&&r.some(function(e){return $r(e,n)}))}function Qn(r){return r.match(/^(https?|mock|file):\/\//)?r.split("/").slice(0,3).join("/"):X()}function kn(r,n,e,t){e===void 0&&(e=1e3),t===void 0&&(t=1/0);var o;return function i(){if(Cr(r))return o&&clearTimeout(o),n();t<=0?clearTimeout(o):(t-=e,o=setTimeout(i,e))}(),{cancel:function(){o&&clearTimeout(o)}}}function fe(r){try{if(r===window)return!0}catch(n){if(n&&n.message===se)return!0}try{if({}.toString.call(r)==="[object Window]")return!0}catch(n){if(n&&n.message===se)return!0}try{if(window.Window&&r instanceof window.Window)return!0}catch(n){if(n&&n.message===se)return!0}try{if(r&&r.self===r)return!0}catch(n){if(n&&n.message===se)return!0}try{if(r&&r.parent===r)return!0}catch(n){if(n&&n.message===se)return!0}try{if(r&&r.top===r)return!0}catch(n){if(n&&n.message===se)return!0}try{if(r&&r.__cross_domain_utils_window_check__==="__unlikely_value__")return!1}catch{return!0}try{if("postMessage"in r&&"self"in r&&"location"in r)return!0}catch{}return!1}function rt(r){if(hr(r))return Vr(r).frameElement;for(var n=0,e=document.querySelectorAll("iframe");n<e.length;n++){var t=e[n];if(t&&t.contentWindow&&t.contentWindow===r)return t}}function lo(r){if(function(e){return e===void 0&&(e=window),Boolean(Jr(e))}(r)){var n=rt(r);if(n&&n.parentElement){n.parentElement.removeChild(n);return}}try{r.close()}catch{}}function Qe(r,n){for(var e=0;e<r.length;e++)try{if(r[e]===n)return e}catch{}return-1}var ke=function(){function r(){if(this.name=void 0,this.weakmap=void 0,this.keys=void 0,this.values=void 0,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__",function(){if(typeof WeakMap>"u"||Object.freeze===void 0)return!1;try{var e=new WeakMap,t={};return Object.freeze(t),e.set(t,"__testvalue__"),e.get(t)==="__testvalue__"}catch{return!1}}())try{this.weakmap=new WeakMap}catch{}this.keys=[],this.values=[]}var n=r.prototype;return n._cleanupClosedWindows=function(){for(var e=this.weakmap,t=this.keys,o=0;o<t.length;o++){var i=t[o];if(fe(i)&&Cr(i)){if(e)try{e.delete(i)}catch{}t.splice(o,1),this.values.splice(o,1),o-=1}}},n.isSafeToReadWrite=function(e){return!fe(e)},n.set=function(e,t){if(!e)throw new Error("WeakMap expected key");var o=this.weakmap;if(o)try{o.set(e,t)}catch{delete this.weakmap}if(this.isSafeToReadWrite(e))try{var i=this.name,a=e[i];a&&a[0]===e?a[1]=t:Object.defineProperty(e,i,{value:[e,t],writable:!0});return}catch{}this._cleanupClosedWindows();var c=this.keys,d=this.values,s=Qe(c,e);s===-1?(c.push(e),d.push(t)):d[s]=t},n.get=function(e){if(!e)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{if(t.has(e))return t.get(e)}catch{delete this.weakmap}if(this.isSafeToReadWrite(e))try{var o=e[this.name];return o&&o[0]===e?o[1]:void 0}catch{}this._cleanupClosedWindows();var i=Qe(this.keys,e);if(i!==-1)return this.values[i]},n.delete=function(e){if(!e)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{t.delete(e)}catch{delete this.weakmap}if(this.isSafeToReadWrite(e))try{var o=e[this.name];o&&o[0]===e&&(o[0]=o[1]=void 0)}catch{}this._cleanupClosedWindows();var i=this.keys,a=Qe(i,e);a!==-1&&(i.splice(a,1),this.values.splice(a,1))},n.has=function(e){if(!e)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{if(t.has(e))return!0}catch{delete this.weakmap}if(this.isSafeToReadWrite(e))try{var o=e[this.name];return!(!o||o[0]!==e)}catch{}return this._cleanupClosedWindows(),Qe(this.keys,e)!==-1},n.getOrSet=function(e,t){if(this.has(e))return this.get(e);var o=t();return this.set(e,o),o},r}();function et(r){return(et=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(r)}function ho(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function nt(r,n,e){return(nt=ho()?Reflect.construct:function(t,o,i){var a=[null];a.push.apply(a,o);var c=new(Function.bind.apply(t,a));return i&&q(c,i.prototype),c}).apply(null,arguments)}function tt(r){var n=typeof Map=="function"?new Map:void 0;return(tt=function(e){if(e===null||(t=e,Function.toString.call(t).indexOf("[native code]")===-1))return e;var t;if(typeof e!="function")throw new TypeError("Super expression must either be null or a function");if(n!==void 0){if(n.has(e))return n.get(e);n.set(e,o)}function o(){return nt(e,arguments,et(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),q(o,e)})(r)}function Pn(r){var n=!1;try{(r instanceof window.Element||r!==null&&typeof r=="object"&&r.nodeType===1&&typeof r.style=="object"&&typeof r.ownerDocument=="object")&&(n=!0)}catch{}return n}function bn(r){return r.name||r.__name__||r.displayName||"anonymous"}function xn(r,n){try{delete r.name,r.name=n}catch{}return r.__name__=r.displayName=n,r}function Cn(r){if(typeof btoa=="function")return btoa(encodeURIComponent(r).replace(/%([0-9A-F]{2})/g,function(n,e){return String.fromCharCode(parseInt(e,16))})).replace(/[=]/g,"");if(typeof Buffer<"u")return Buffer.from(r,"utf8").toString("base64").replace(/[=]/g,"");throw new Error("Can not find window.btoa or Buffer")}function Or(){var r="0123456789abcdef";return"uid_"+"xxxxxxxxxx".replace(/./g,function(){return r.charAt(Math.floor(Math.random()*r.length))})+"_"+Cn(new Date().toISOString().slice(11,19).replace("T",".")).replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}var rn;function On(r){try{return JSON.stringify([].slice.call(r),function(n,e){return typeof e=="function"?"memoize["+function(t){if(rn=rn||new ke,t==null||typeof t!="object"&&typeof t!="function")throw new Error("Invalid object");var o=rn.get(t);return o||(o=typeof t+":"+Or(),rn.set(t,o)),o}(e)+"]":Pn(e)?{}:e})}catch{throw new Error("Arguments not serializable -- can not be used to memoize")}}function vo(){return{}}var ze=0,ot=0;function ee(r,n){n===void 0&&(n={});var e=n.thisNamespace,t=e!==void 0&&e,o=n.time,i,a,c=ze;ze+=1;var d=function(){for(var s=arguments.length,h=new Array(s),u=0;u<s;u++)h[u]=arguments[u];c<ot&&(i=null,a=null,c=ze,ze+=1);var f;f=t?(a=a||new ke).getOrSet(this,vo):i=i||{};var l;try{l=On(h)}catch{return r.apply(this,arguments)}var p=f[l];if(p&&o&&Date.now()-p.time<o&&(delete f[l],p=null),p)return p.value;var y=Date.now(),P=r.apply(this,arguments);return f[l]={time:y,value:P},P};return d.reset=function(){i=null,a=null},xn(d,(n.name||bn(r))+"::memoized")}ee.clear=function(){ot=ze};function wo(r){var n={};function e(){for(var t=arguments,o=this,i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];var d=On(a);return n.hasOwnProperty(d)||(n[d]=w.try(function(){return r.apply(o,t)}).finally(function(){delete n[d]})),n[d]}return e.reset=function(){n={}},xn(e,bn(r)+"::promiseMemoized")}function tr(){}function en(r){var n=!1;return xn(function(){if(!n)return n=!0,r.apply(this,arguments)},bn(r)+"::once")}function xe(r,n){if(n===void 0&&(n=1),n>=3)return"stringifyError stack overflow";try{if(!r)return"<unknown error: "+{}.toString.call(r)+">";if(typeof r=="string")return r;if(r instanceof Error){var e=r&&r.stack,t=r&&r.message;if(e&&t)return e.indexOf(t)!==-1?e:t+`
`+e;if(e)return e;if(t)return t}return r&&r.toString&&typeof r.toString=="function"?r.toString():{}.toString.call(r)}catch(o){return"Error while stringifying error: "+xe(o,n+1)}}function nn(r){return typeof r=="string"?r:r&&r.toString&&typeof r.toString=="function"?r.toString():{}.toString.call(r)}function tn(r,n){if(!n)return r;if(Object.assign)return Object.assign(r,n);for(var e in n)n.hasOwnProperty(e)&&(r[e]=n[e]);return r}ee(function(r){if(Object.values)return Object.values(r);var n=[];for(var e in r)r.hasOwnProperty(e)&&n.push(r[e]);return n});function po(r){return r}function Ae(r,n){var e;return function t(){e=setTimeout(function(){r(),t()},n)}(),{cancel:function(){clearTimeout(e)}}}function Dn(r){return[].slice.call(r)}function ne(r){return r!=null}function Wn(r){return{}.toString.call(r)==="[object RegExp]"}function Fe(r,n,e){if(r.hasOwnProperty(n))return r[n];var t=e();return r[n]=t,t}function on(r){var n=[],e=!1,t,o={set:function(i,a){return e||(r[i]=a,o.register(function(){delete r[i]})),a},register:function(i){var a=en(function(){return i(t)});return e?i(t):n.push(a),{cancel:function(){var c=n.indexOf(a);c!==-1&&n.splice(c,1)}}},all:function(i){t=i;var a=[];for(e=!0;n.length;){var c=n.shift();a.push(c())}return w.all(a).then(tr)}};return o}function an(r,n){if(n==null)throw new Error("Expected "+r+" to be present");return n}var mo=function(r){rr(n,r);function n(e){var t;return(t=r.call(this,e)||this).name=t.constructor.name,typeof Error.captureStackTrace=="function"?Error.captureStackTrace(function(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}(t),t.constructor):t.stack=new Error(e).stack,t}return n}(tt(Error));function it(){var r=document.body;if(!r)throw new Error("Body element not found");return r}function un(){return Boolean(document.body)&&document.readyState==="complete"}function at(){return Boolean(document.body)&&document.readyState==="interactive"}function ut(r){return encodeURIComponent(r)}ee(function(){return new w(function(r){if(un()||at())return r();var n=setInterval(function(){if(un()||at())return clearInterval(n),r()},10)})});function ct(r){return function(n,e,t){t===void 0&&(t=[]);var o=n.__inline_memoize_cache__=n.__inline_memoize_cache__||{},i=On(t);return o.hasOwnProperty(i)?o[i]:o[i]=function(){var a={};if(!r||r.indexOf("=")===-1)return a;for(var c=0,d=r.split("&");c<d.length;c++){var s=d[c];(s=s.split("="))[0]&&s[1]&&(a[decodeURIComponent(s[0])]=decodeURIComponent(s[1]))}return a}.apply(void 0,t)}(ct,0,[r])}function dt(r,n){return n===void 0&&(n={}),n&&Object.keys(n).length?function(e){return e===void 0&&(e={}),Object.keys(e).filter(function(t){return typeof e[t]=="string"||typeof e[t]=="boolean"}).map(function(t){var o=e[t];if(typeof o!="string"&&typeof o!="boolean")throw new TypeError("Invalid type for query");return ut(t)+"="+ut(o.toString())}).join("&")}(lr({},ct(r),n)):r}function go(r,n){r.appendChild(n)}function cn(r,n){return n===void 0&&(n=document),Pn(r)?r:typeof r=="string"?n.querySelector(r):void 0}function st(r){return new w(function(n,e){var t=nn(r),o=cn(r);if(o)return n(o);if(un())return e(new Error("Document is ready and element "+t+" does not exist"));var i=setInterval(function(){if(o=cn(r))n(o),clearInterval(i);else if(un())return clearInterval(i),e(new Error("Document is ready and element "+t+" does not exist"))},10)})}var yo=function(r){rr(n,r);function n(){return r.apply(this,arguments)||this}return n}(mo),dn;function ft(r){if((dn=dn||new ke).has(r)){var n=dn.get(r);if(n)return n}var e=new w(function(t,o){r.addEventListener("load",function(){(function(i){if(function(){for(var a=0;a<Te.length;a++){var c=!1;try{c=Te[a].closed}catch{}c&&(gn.splice(a,1),Te.splice(a,1))}}(),i&&i.contentWindow)try{Te.push(i.contentWindow),gn.push(i)}catch{}})(r),t(r)}),r.addEventListener("error",function(i){r.contentWindow?t(r):o(i)})});return dn.set(r,e),e}function Sn(r){return ft(r).then(function(n){if(!n.contentWindow)throw new Error("Could not find window in iframe");return n.contentWindow})}function lt(r,n){r===void 0&&(r={});var e=r.style||{},t=function(i,a,c){i===void 0&&(i="div"),a===void 0&&(a={}),i=i.toLowerCase();var d=document.createElement(i);if(a.style&&tn(d.style,a.style),a.class&&(d.className=a.class.join(" ")),a.id&&d.setAttribute("id",a.id),a.attributes)for(var s=0,h=Object.keys(a.attributes);s<h.length;s++){var u=h[s];d.setAttribute(u,a.attributes[u])}if(a.styleSheet&&function(f,l,p){p===void 0&&(p=window.document),f.styleSheet?f.styleSheet.cssText=l:f.appendChild(p.createTextNode(l))}(d,a.styleSheet),a.html){if(i==="iframe")throw new Error("Iframe html can not be written unless container provided and iframe in DOM");d.innerHTML=a.html}return d}("iframe",{attributes:lr({allowTransparency:"true"},r.attributes||{}),style:lr({backgroundColor:"transparent",border:"none"},e),html:r.html,class:r.class}),o=window.navigator.userAgent.match(/MSIE|Edge/i);return t.hasAttribute("id")||t.setAttribute("id",Or()),ft(t),n&&function(i,a){a===void 0&&(a=document);var c=cn(i,a);if(c)return c;throw new Error("Can not find element: "+nn(i))}(n).appendChild(t),(r.url||o)&&t.setAttribute("src",r.url||"about:blank"),t}function ht(r,n,e){return r.addEventListener(n,e),{cancel:function(){r.removeEventListener(n,e)}}}function Eo(r){r.style.setProperty("display","")}function vt(r){r.style.setProperty("display","none","important")}function Me(r){r&&r.parentNode&&r.parentNode.removeChild(r)}function sn(r){return!(r&&r.parentNode&&r.ownerDocument&&r.ownerDocument.documentElement&&r.ownerDocument.documentElement.contains(r))}function wt(r,n,e){var t=e===void 0?{}:e,o=t.width,i=o===void 0||o,a=t.height,c=a===void 0||a,d=t.interval,s=d===void 0?100:d,h=t.win,u=h===void 0?window:h,f=r.offsetWidth,l=r.offsetHeight,p=!1;n({width:f,height:l});var y=function(){if(!p&&function(m){return Boolean(m.offsetWidth||m.offsetHeight||m.getClientRects().length)}(r)){var F=r.offsetWidth,U=r.offsetHeight;(i&&F!==f||c&&U!==l)&&n({width:F,height:U}),f=F,l=U}},P,D;return u.addEventListener("resize",y),u.ResizeObserver!==void 0?((P=new u.ResizeObserver(y)).observe(r),D=Ae(y,10*s)):u.MutationObserver!==void 0?((P=new u.MutationObserver(y)).observe(r,{attributes:!0,childList:!0,subtree:!0,characterData:!1}),D=Ae(y,10*s)):D=Ae(y,s),{cancel:function(){p=!0,P.disconnect(),window.removeEventListener("resize",y),D.cancel()}}}function Rn(r){for(;r.parentNode;)r=r.parentNode;return r.toString()==="[object ShadowRoot]"}var fn=typeof document<"u"?document.currentScript:null,Po=ee(function(){if(fn||(fn=function(){try{var r=function(){try{throw new Error("_")}catch(a){return a.stack||""}}(),n=/.*at [^(]*\((.*):(.+):(.+)\)$/gi.exec(r),e=n&&n[1];if(!e)return;for(var t=0,o=[].slice.call(document.getElementsByTagName("script")).reverse();t<o.length;t++){var i=o[t];if(i.src&&i.src===e)return i}}catch{}}()))return fn;throw new Error("Can not determine current script")}),bo=Or();ee(function(){var r;try{r=Po()}catch{return bo}var n=r.getAttribute("data-uid");if(n&&typeof n=="string"||(n=r.getAttribute("data-uid-auto"))&&typeof n=="string")return n;if(r.src){var e=function(t){for(var o="",i=0;i<t.length;i++){var a=t[i].charCodeAt(0)*i;t[i+1]&&(a+=t[i+1].charCodeAt(0)*(i-1)),o+=String.fromCharCode(97+Math.abs(a)%26)}return o}(JSON.stringify({src:r.src,dataset:r.dataset}));n="uid_"+e.slice(e.length-30)}else n=Or();return r.setAttribute("data-uid-auto",n),n});function pt(r){return function(n){if(typeof n=="number")return n;var e=n.match(/^([0-9]+)(px|%)$/);if(!e)throw new Error("Could not match css value from "+n);return parseInt(e[1],10)}(r)+"px"}function mt(r){return typeof r=="number"?pt(r):typeof(n=r)=="string"&&/^[0-9]+%$/.test(n)?r:pt(r);var n}function Ce(r){r===void 0&&(r=window);var n="__post_robot_11_0_0__";return r!==window?r[n]:r[n]=r[n]||{}}var gt=function(){return{}};function vr(r,n){return r===void 0&&(r="store"),n===void 0&&(n=gt),Fe(Ce(),r,function(){var e=n();return{has:function(t){return e.hasOwnProperty(t)},get:function(t,o){return e.hasOwnProperty(t)?e[t]:o},set:function(t,o){return e[t]=o,o},del:function(t){delete e[t]},getOrSet:function(t,o){return Fe(e,t,o)},reset:function(){e=n()},keys:function(){return Object.keys(e)}}})}var xo=function(){};function ln(){var r=Ce();return r.WINDOW_WILDCARD=r.WINDOW_WILDCARD||new xo,r.WINDOW_WILDCARD}function Sr(r,n){return r===void 0&&(r="store"),n===void 0&&(n=gt),vr("windowStore").getOrSet(r,function(){var e=new ke,t=function(o){return e.getOrSet(o,n)};return{has:function(o){return t(o).hasOwnProperty(r)},get:function(o,i){var a=t(o);return a.hasOwnProperty(r)?a[r]:i},set:function(o,i){return t(o)[r]=i,i},del:function(o){delete t(o)[r]},getOrSet:function(o,i){return Fe(t(o),r,i)}}})}function yt(){return vr("instance").getOrSet("instanceID",Or)}function Et(r,n){var e=n.domain,t=Sr("helloPromises"),o=t.get(r);o&&o.resolve({domain:e});var i=w.resolve({domain:e});return t.set(r,i),i}function Nn(r,n){return(0,n.send)(r,"postrobot_hello",{instanceID:yt()},{domain:"*",timeout:-1}).then(function(e){var t=e.origin,o=e.data.instanceID;return Et(r,{domain:t}),{win:r,domain:t,instanceID:o}})}function Pt(r,n){var e=n.send;return Sr("windowInstanceIDPromises").getOrSet(r,function(){return Nn(r,{send:e}).then(function(t){return t.instanceID})})}function bt(r){Sr("knownWindows").set(r,!0)}function Tn(r){return typeof r=="object"&&r!==null&&typeof r.__type__=="string"}function xt(r){return r===void 0?"undefined":r===null?"null":Array.isArray(r)?"array":typeof r=="function"?"function":typeof r=="object"?r instanceof Error?"error":typeof r.then=="function"?"promise":{}.toString.call(r)==="[object RegExp]"?"regex":{}.toString.call(r)==="[object Date]"?"date":"object":typeof r=="string"?"string":typeof r=="number"?"number":typeof r=="boolean"?"boolean":void 0}function le(r,n){return{__type__:r,__val__:n}}var Ir,Co=((Ir={}).function=function(){},Ir.error=function(r){return le("error",{message:r.message,stack:r.stack,code:r.code,data:r.data})},Ir.promise=function(){},Ir.regex=function(r){return le("regex",r.source)},Ir.date=function(r){return le("date",r.toJSON())},Ir.array=function(r){return r},Ir.object=function(r){return r},Ir.string=function(r){return r},Ir.number=function(r){return r},Ir.boolean=function(r){return r},Ir.null=function(r){return r},Ir[void 0]=function(r){return le("undefined",r)},Ir),Oo={},zr,Do=((zr={}).function=function(){throw new Error("Function serialization is not implemented; nothing to deserialize")},zr.error=function(r){var n=r.stack,e=r.code,t=r.data,o=new Error(r.message);return o.code=e,t&&(o.data=t),o.stack=n+`

`+o.stack,o},zr.promise=function(){throw new Error("Promise serialization is not implemented; nothing to deserialize")},zr.regex=function(r){return new RegExp(r)},zr.date=function(r){return new Date(r)},zr.array=function(r){return r},zr.object=function(r){return r},zr.string=function(r){return r},zr.number=function(r){return r},zr.boolean=function(r){return r},zr.null=function(r){return r},zr[void 0]=function(){},zr),Wo={};new w(function(r){if(window.document&&window.document.body)return r(window.document.body);var n=setInterval(function(){if(window.document&&window.document.body)return clearInterval(n),r(window.document.body)},10)});function In(){for(var r=vr("idToProxyWindow"),n=0,e=r.keys();n<e.length;n++){var t=e[n];r.get(t).shouldClean()&&r.del(t)}}function Ct(r,n){var e=n.send,t=n.id,o=t===void 0?Or():t,i=r.then(function(d){if(hr(d))return Vr(d).name}),a=r.then(function(d){if(Cr(d))throw new Error("Window is closed, can not determine type");return Ee(d)?Ze.POPUP:Ze.IFRAME});i.catch(tr),a.catch(tr);var c=function(){return r.then(function(d){if(!Cr(d))return hr(d)?Vr(d).name:i})};return{id:o,getType:function(){return a},getInstanceID:wo(function(){return r.then(function(d){return Pt(d,{send:e})})}),close:function(){return r.then(lo)},getName:c,focus:function(){return r.then(function(d){d.focus()})},isClosed:function(){return r.then(function(d){return Cr(d)})},setLocation:function(d,s){return s===void 0&&(s={}),r.then(function(h){var u=window.location.protocol+"//"+window.location.host,f=s.method,l=f===void 0?"get":f,p=s.body;if(d.indexOf("/")===0)d=""+u+d;else if(!d.match(/^https?:\/\//)&&d.indexOf(u)!==0)throw new Error("Expected url to be http or https url, or absolute path, got "+JSON.stringify(d));if(l==="post")return c().then(function(y){if(!y)throw new Error("Can not post to window without target name");(function(P){var D=P.url,F=P.target,U=P.body,m=P.method,T=m===void 0?"post":m,b=document.createElement("form");if(b.setAttribute("target",F),b.setAttribute("method",T),b.setAttribute("action",D),b.style.display="none",U)for(var S=0,x=Object.keys(U);S<x.length;S++){var B,$=x[S],N=document.createElement("input");N.setAttribute("name",$),N.setAttribute("value",(B=U[$])==null?void 0:B.toString()),b.appendChild(N)}it().appendChild(b),b.submit(),it().removeChild(b)})({url:d,target:y,method:l,body:p})});if(l!=="get")throw new Error("Unsupported method: "+l);if(hr(h))try{if(h.location&&typeof h.location.replace=="function"){h.location.replace(d);return}}catch{}h.location=d})},setName:function(d){return r.then(function(s){var h=hr(s),u=rt(s);if(!h)throw new Error("Can not set name for cross-domain window: "+d);Vr(s).name=d,u&&u.setAttribute("name",d),i=w.resolve(d)})}}}var Ar=function(){function r(e){var t=e.send,o=e.win,i=e.serializedWindow;this.id=void 0,this.isProxyWindow=!0,this.serializedWindow=void 0,this.actualWindow=void 0,this.actualWindowPromise=void 0,this.send=void 0,this.name=void 0,this.actualWindowPromise=new w,this.serializedWindow=i||Ct(this.actualWindowPromise,{send:t}),vr("idToProxyWindow").set(this.getID(),this),o&&this.setWindow(o,{send:t})}var n=r.prototype;return n.getID=function(){return this.serializedWindow.id},n.getType=function(){return this.serializedWindow.getType()},n.isPopup=function(){return this.getType().then(function(e){return e===Ze.POPUP})},n.setLocation=function(e,t){var o=this;return this.serializedWindow.setLocation(e,t).then(function(){return o})},n.getName=function(){return this.serializedWindow.getName()},n.setName=function(e){var t=this;return this.serializedWindow.setName(e).then(function(){return t})},n.close=function(){var e=this;return this.serializedWindow.close().then(function(){return e})},n.focus=function(){var e=this,t=this.isPopup(),o=this.getName(),i=w.hash({isPopup:t,name:o}).then(function(c){var d=c.name;c.isPopup&&d&&window.open("",d,"noopener")}),a=this.serializedWindow.focus();return w.all([i,a]).then(function(){return e})},n.isClosed=function(){return this.serializedWindow.isClosed()},n.getWindow=function(){return this.actualWindow},n.setWindow=function(e,t){var o=t.send;this.actualWindow=e,this.actualWindowPromise.resolve(this.actualWindow),this.serializedWindow=Ct(this.actualWindowPromise,{send:o,id:this.getID()}),Sr("winToProxyWindow").set(e,this)},n.awaitWindow=function(){return this.actualWindowPromise},n.matchWindow=function(e,t){var o=this,i=t.send;return w.try(function(){return o.actualWindow?e===o.actualWindow:w.hash({proxyInstanceID:o.getInstanceID(),knownWindowInstanceID:Pt(e,{send:i})}).then(function(a){var c=a.proxyInstanceID===a.knownWindowInstanceID;return c&&o.setWindow(e,{send:i}),c})})},n.unwrap=function(){return this.actualWindow||this},n.getInstanceID=function(){return this.serializedWindow.getInstanceID()},n.shouldClean=function(){return Boolean(this.actualWindow&&Cr(this.actualWindow))},n.serialize=function(){return this.serializedWindow},r.unwrap=function(e){return r.isProxyWindow(e)?e.unwrap():e},r.serialize=function(e,t){var o=t.send;return In(),r.toProxyWindow(e,{send:o}).serialize()},r.deserialize=function(e,t){var o=t.send;return In(),vr("idToProxyWindow").get(e.id)||new r({serializedWindow:e,send:o})},r.isProxyWindow=function(e){return Boolean(e&&!fe(e)&&e.isProxyWindow)},r.toProxyWindow=function(e,t){var o=t.send;if(In(),r.isProxyWindow(e))return e;var i=e;return Sr("winToProxyWindow").get(i)||new r({win:i,send:o})},r}();function zn(r,n,e,t,o){var i=Sr("methodStore"),a=vr("proxyWindowMethods");Ar.isProxyWindow(t)?a.set(r,{val:n,name:e,domain:o,source:t}):(a.del(r),i.getOrSet(t,function(){return{}})[r]={domain:o,name:e,val:n,source:t})}function Ot(r,n){var e=Sr("methodStore"),t=vr("proxyWindowMethods");return e.getOrSet(r,function(){return{}})[n]||t.get(n)}function Dt(r,n,e,t,o){a=(i={on:o.on,send:o.send}).on,c=i.send,vr("builtinListeners").getOrSet("functionCalls",function(){return a("postrobot_method",{domain:"*"},function(h){var u=h.source,f=h.origin,l=h.data,p=l.id,y=l.name,P=Ot(u,p);if(!P)throw new Error("Could not find method '"+y+"' with id: "+l.id+" in "+X(window));var D=P.source,F=P.domain,U=P.val;return w.try(function(){if(!$r(F,f))throw new Error("Method '"+l.name+"' domain "+JSON.stringify(Wn(P.domain)?P.domain.source:P.domain)+" does not match origin "+f+" in "+X(window));if(Ar.isProxyWindow(D))return D.matchWindow(u,{send:c}).then(function(m){if(!m)throw new Error("Method call '"+l.name+"' failed - proxy window does not match source in "+X(window))})}).then(function(){return U.apply({source:u,origin:f},l.args)},function(m){return w.try(function(){if(U.onError)return U.onError(m)}).then(function(){throw m.stack&&(m.stack="Remote call to "+y+"("+function(T){return T===void 0&&(T=[]),Dn(T).map(function(b){return typeof b=="string"?"'"+b+"'":b===void 0?"undefined":b===null?"null":typeof b=="boolean"?b.toString():Array.isArray(b)?"[ ... ]":typeof b=="object"?"{ ... }":typeof b=="function"?"() => { ... }":"<"+typeof b+">"}).join(", ")}(l.args)+`) failed

`+m.stack),m})}).then(function(m){return{result:m,id:p,name:y}})})});var i,a,c,d=e.__id__||Or();r=Ar.unwrap(r);var s=e.__name__||e.name||t;return typeof s=="string"&&typeof s.indexOf=="function"&&s.indexOf("anonymous::")===0&&(s=s.replace("anonymous::",t+"::")),Ar.isProxyWindow(r)?(zn(d,e,s,r,n),r.awaitWindow().then(function(h){zn(d,e,s,h,n)})):zn(d,e,s,r,n),le("cross_domain_function",{id:d,name:s})}function Wt(r,n,e,t){var o,i=t.on,a=t.send;return function(c,d){d===void 0&&(d=Oo);var s=JSON.stringify(c,function(h){var u=this[h];if(Tn(this))return u;var f=xt(u);if(!f)return u;var l=d[f]||Co[f];return l?l(u,h):u});return s===void 0?"undefined":s}(e,((o={}).promise=function(c,d){return function(s,h,u,f,l){return le("cross_domain_zalgo_promise",{then:Dt(s,h,function(p,y){return u.then(p,y)},f,{on:l.on,send:l.send})})}(r,n,c,d,{on:i,send:a})},o.function=function(c,d){return Dt(r,n,c,d,{on:i,send:a})},o.object=function(c){return fe(c)||Ar.isProxyWindow(c)?le("cross_domain_window",Ar.serialize(c,{send:a})):c},o))}function St(r,n,e,t){var o,i=t.send;return function(a,c){if(c===void 0&&(c=Wo),a!=="undefined")return JSON.parse(a,function(d,s){if(Tn(this))return s;var h,u;if(Tn(s)?(h=s.__type__,u=s.__val__):(h=xt(s),u=s),!h)return u;var f=c[h]||Do[h];return f?f(u,d):u})}(e,((o={}).cross_domain_zalgo_promise=function(a){return function(c,d,s){return new w(s.then)}(0,0,a)},o.cross_domain_function=function(a){return function(c,d,s,h){var u=s.id,f=s.name,l=h.send,p=function(P){P===void 0&&(P={});function D(){var F=arguments;return Ar.toProxyWindow(c,{send:l}).awaitWindow().then(function(U){var m=Ot(U,u);if(m&&m.val!==D)return m.val.apply({source:window,origin:X()},F);var T=[].slice.call(F);return P.fireAndForget?l(U,"postrobot_method",{id:u,name:f,args:T},{domain:d,fireAndForget:!0}):l(U,"postrobot_method",{id:u,name:f,args:T},{domain:d,fireAndForget:!1}).then(function(b){return b.data.result})}).catch(function(U){throw U})}return D.__name__=f,D.__origin__=d,D.__source__=c,D.__id__=u,D.origin=d,D},y=p();return y.fireAndForget=p({fireAndForget:!0}),y}(r,n,a,{send:i})},o.cross_domain_window=function(a){return Ar.deserialize(a,{send:i})},o))}var hn={};hn.postrobot_post_message=function(r,n,e){e.indexOf("file:")===0&&(e="*"),r.postMessage(n,e)},hn.postrobot_global=function(r,n){if(!function(t){return(t=t||window).navigator.mockUserAgent||t.navigator.userAgent}(window).match(/MSIE|rv:11|trident|edge\/12|edge\/13/i))throw new Error("Global messaging not needed for browser");if(!hr(r))throw new Error("Post message through global disabled between different domain windows");if(Kn(window,r)!==!1)throw new Error("Can only use global to communicate between two different windows, not between frames");var e=Ce(r);if(!e)throw new Error("Can not find postRobot global on foreign window");e.receiveMessage({source:window,origin:X(),data:n})};function An(r,n,e,t){var o=t.on,i=t.send;return w.try(function(){var a=Sr().getOrSet(r,function(){return{}});return a.buffer=a.buffer||[],a.buffer.push(e),a.flush=a.flush||w.flush().then(function(){if(Cr(r))throw new Error("Window is closed");var c=Wt(r,n,((d={}).__post_robot_11_0_0__=a.buffer||[],d),{on:o,send:i}),d;delete a.buffer;for(var s=Object.keys(hn),h=[],u=0;u<s.length;u++){var f=s[u];try{hn[f](r,c,n)}catch(l){h.push(l)}}if(h.length===s.length)throw new Error(`All post-robot messaging strategies failed:

`+h.map(function(l,p){return p+". "+xe(l)}).join(`

`))}),a.flush.then(function(){delete a.flush})}).then(tr)}function Rt(r){return vr("responseListeners").get(r)}function Nt(r){vr("responseListeners").del(r)}function Tt(r){return vr("erroredResponseListeners").has(r)}function It(r){var n=r.name,e=r.win,t=r.domain,o=Sr("requestListeners");if(e==="*"&&(e=null),t==="*"&&(t=null),!n)throw new Error("Name required to get request listener");for(var i=0,a=[e,ln()];i<a.length;i++){var c=a[i];if(c){var d=o.get(c);if(d){var s=d[n];if(s){if(t&&typeof t=="string"){if(s[t])return s[t];if(s.__domain_regex__)for(var h=0,u=s.__domain_regex__;h<u.length;h++){var f=u[h],l=f.listener;if($r(f.regex,t))return l}}if(s["*"])return s["*"]}}}}}function So(r,n,e,t){var o=t.on,i=t.send,a=It({name:e.name,win:r,domain:n}),c=e.name==="postrobot_method"&&e.data&&typeof e.data.name=="string"?e.data.name+"()":e.name;function d(s,h,u){return w.flush().then(function(){if(!e.fireAndForget&&!Cr(r))try{return An(r,n,{id:Or(),origin:X(window),type:"postrobot_message_response",hash:e.hash,name:e.name,ack:s,data:h,error:u},{on:o,send:i})}catch(f){throw new Error("Send response message failed for "+c+" in "+X()+`

`+xe(f))}})}return w.all([w.flush().then(function(){if(!e.fireAndForget&&!Cr(r))try{return An(r,n,{id:Or(),origin:X(window),type:"postrobot_message_ack",hash:e.hash,name:e.name},{on:o,send:i})}catch(s){throw new Error("Send ack message failed for "+c+" in "+X()+`

`+xe(s))}}),w.try(function(){if(!a)throw new Error("No handler found for post message: "+e.name+" from "+n+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);return a.handler({source:r,origin:n,data:e.data})}).then(function(s){return d("success",s)},function(s){return d("error",null,s)})]).then(tr).catch(function(s){if(a&&a.handleError)return a.handleError(s);throw s})}function Ro(r,n,e){if(!Tt(e.hash)){var t=Rt(e.hash);if(!t)throw new Error("No handler found for post message ack for message: "+e.name+" from "+n+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);try{if(!$r(t.domain,n))throw new Error("Ack origin "+n+" does not match domain "+t.domain.toString());if(r!==t.win)throw new Error("Ack source does not match registered window")}catch(o){t.promise.reject(o)}t.ack=!0}}function No(r,n,e){if(!Tt(e.hash)){var t=Rt(e.hash);if(!t)throw new Error("No handler found for post message response for message: "+e.name+" from "+n+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!$r(t.domain,n))throw new Error("Response origin "+n+" does not match domain "+(o=t.domain,Array.isArray(o)?"("+o.join(" | ")+")":Ne(o)?"RegExp("+o.toString()+")":o.toString()));var o;if(r!==t.win)throw new Error("Response source does not match registered window");Nt(e.hash),e.ack==="error"?t.promise.reject(e.error):e.ack==="success"&&t.promise.resolve({source:r,origin:n,data:e.data})}}function zt(r,n){var e=n.on,t=n.send,o=vr("receivedMessages");try{if(!window||window.closed||!r.source)return}catch{return}var i=r.source,a=r.origin,c=function(h,u,f,l){var p=l.on,y=l.send,P;try{P=St(u,f,h,{on:p,send:y})}catch{return}if(P&&typeof P=="object"&&P!==null){var D=P.__post_robot_11_0_0__;if(Array.isArray(D))return D}}(r.data,i,a,{on:e,send:t});if(c){bt(i);for(var d=0;d<c.length;d++){var s=c[d];if(o.has(s.id)||(o.set(s.id,!0),Cr(i)&&!s.fireAndForget))return;s.origin.indexOf("file:")===0&&(a="file://");try{s.type==="postrobot_message_request"?So(i,a,s,{on:e,send:t}):s.type==="postrobot_message_response"?No(i,a,s):s.type==="postrobot_message_ack"&&Ro(i,a,s)}catch(h){setTimeout(function(){throw h},0)}}}}function te(r,n,e){if(!r)throw new Error("Expected name");if(typeof(n=n||{})=="function"&&(e=n,n={}),!e)throw new Error("Expected handler");var t=function o(i,a){var c=i.name,d=i.win,s=i.domain,h=Sr("requestListeners");if(!c||typeof c!="string")throw new Error("Name required to add request listener");if(d&&d!=="*"&&Ar.isProxyWindow(d)){var u=d.awaitWindow().then(function(B){return o({name:c,win:B,domain:s},a)});return{cancel:function(){u.then(function(B){return B.cancel()},tr)}}}var f=d;if(Array.isArray(f)){for(var l=[],p=0,y=f;p<y.length;p++)l.push(o({name:c,domain:s,win:y[p]},a));return{cancel:function(){for(var B=0;B<l.length;B++)l[B].cancel()}}}if(Array.isArray(s)){for(var P=[],D=0,F=s;D<F.length;D++)P.push(o({name:c,win:f,domain:F[D]},a));return{cancel:function(){for(var B=0;B<P.length;B++)P[B].cancel()}}}var U=It({name:c,win:f,domain:s});f&&f!=="*"||(f=ln());var m=(s=s||"*").toString();if(U)throw f&&s?new Error("Request listener already exists for "+c+" on domain "+s.toString()+" for "+(f===ln()?"wildcard":"specified")+" window"):f?new Error("Request listener already exists for "+c+" for "+(f===ln()?"wildcard":"specified")+" window"):s?new Error("Request listener already exists for "+c+" on domain "+s.toString()):new Error("Request listener already exists for "+c);var T=h.getOrSet(f,function(){return{}}),b=Fe(T,c,function(){return{}}),S,x;return Wn(s)?(S=Fe(b,"__domain_regex__",function(){return[]})).push(x={regex:s,listener:a}):b[m]=a,{cancel:function(){delete b[m],x&&(S.splice(S.indexOf(x,1)),S.length||delete b.__domain_regex__),Object.keys(b).length||delete T[c],f&&!Object.keys(T).length&&h.del(f)}}}({name:r,win:n.window,domain:n.domain||"*"},{handler:e||n.handler,handleError:n.errorHandler||function(o){throw o}});return{cancel:function(){t.cancel()}}}var Gr=function r(n,e,t,o){var i=(o=o||{}).domain||"*",a=o.timeout||-1,c=o.timeout||5e3,d=o.fireAndForget||!1;return Ar.toProxyWindow(n,{send:r}).awaitWindow().then(function(s){return w.try(function(){if(function(h,u,f){if(!h)throw new Error("Expected name");if(f&&typeof f!="string"&&!Array.isArray(f)&&!Wn(f))throw new TypeError("Can not send "+h+". Expected domain "+JSON.stringify(f)+" to be a string, array, or regex");if(Cr(u))throw new Error("Can not send "+h+". Target window is closed")}(e,s,i),function(h,u){var f=Ie(u);if(f)return f===h;if(u===h||Pe(u)===u)return!1;for(var l=0,p=Xe(h);l<p.length;l++)if(p[l]===u)return!0;return!1}(window,s))return function(h,u,f){u===void 0&&(u=5e3),f===void 0&&(f="Window");var l=function(p){return Sr("helloPromises").getOrSet(p,function(){return new w})}(h);return u!==-1&&(l=l.timeout(u,new Error(f+" did not load after "+u+"ms"))),l}(s,c)}).then(function(h){return function(u,f,l,p){var y=p.send;return w.try(function(){return typeof f=="string"?f:w.try(function(){return l||Nn(u,{send:y}).then(function(P){return P.domain})}).then(function(P){if(!$r(f,f))throw new Error("Domain "+nn(f)+" does not match "+nn(f));return P})})}(s,i,(h===void 0?{}:h).domain,{send:r})}).then(function(h){var u=h,f=e==="postrobot_method"&&t&&typeof t.name=="string"?t.name+"()":e,l=new w,p=e+"_"+Or();if(!d){var y={name:e,win:s,domain:u,promise:l};(function(b,S){vr("responseListeners").set(b,S)})(p,y);var P=Sr("requestPromises").getOrSet(s,function(){return[]});P.push(l),l.catch(function(){(function(b){vr("erroredResponseListeners").set(b,!0)})(p),Nt(p)});var D=function(b){return Sr("knownWindows").get(b,!1)}(s)?1e4:2e3,F=a,U=D,m=F,T=Ae(function(){return Cr(s)?l.reject(new Error("Window closed for "+e+" before "+(y.ack?"response":"ack"))):y.cancelled?l.reject(new Error("Response listener was cancelled for "+e)):(U=Math.max(U-500,0),m!==-1&&(m=Math.max(m-500,0)),y.ack||U!==0?m===0?l.reject(new Error("No response for postMessage "+f+" in "+X()+" in "+F+"ms")):void 0:l.reject(new Error("No ack for postMessage "+f+" in "+X()+" in "+D+"ms")))},500);l.finally(function(){T.cancel(),P.splice(P.indexOf(l,1))}).catch(tr)}return An(s,u,{id:Or(),origin:X(window),type:"postrobot_message_request",hash:p,name:e,data:t,fireAndForget:d},{on:te,send:r}).then(function(){return d?l.resolve():l},function(b){throw new Error("Send request message failed for "+f+" in "+X()+`

`+xe(b))})})})};function Le(r){return Ar.toProxyWindow(r,{send:Gr})}function Ue(r){if(!hr(r))throw new Error("Can not get global for window on different domain");return r.__zoid_10_0_1__||(r.__zoid_10_0_1__={}),r.__zoid_10_0_1__}function At(r,n){try{return n(Ue(r))}catch{}}function vn(r){return{get:function(){var n=this;return w.try(function(){if(n.source&&n.source!==window)throw new Error("Can not call get on proxy object from a remote window");return r})}}}function To(r){return Cn(JSON.stringify(r))}function Fn(r){var n=Ue(r);return n.references=n.references||{},n.references}function Ft(r){var n=r.data,e=r.metaData,t=r.sender,o=r.receiver,i=r.passByReference,a=i!==void 0&&i,c=r.basic,d=c!==void 0&&c,s=Le(o.win),h=d?JSON.stringify(n):Wt(s,o.domain,n,{on:te,send:Gr}),u=a?function(f){var l=Or();return Fn(window)[l]=f,{type:"uid",uid:l}}(h):{type:"raw",val:h};return{serializedData:To({sender:{domain:t.domain},metaData:e,reference:u}),cleanReference:function(){f=window,(l=u).type==="uid"&&delete Fn(f)[l.uid];var f,l}}}function Mt(r){var n=r.sender,e=r.basic,t=e!==void 0&&e,o=function(h){return JSON.parse(function(u){if(typeof atob=="function")return decodeURIComponent([].map.call(atob(u),function(f){return"%"+("00"+f.charCodeAt(0).toString(16)).slice(-2)}).join(""));if(typeof Buffer<"u")return Buffer.from(u,"base64").toString("utf8");throw new Error("Can not find window.atob or Buffer")}(h))}(r.data),i=o.reference,a=o.metaData,c;c=typeof n.win=="function"?n.win({metaData:a}):n.win;var d;d=typeof n.domain=="function"?n.domain({metaData:a}):typeof n.domain=="string"?n.domain:o.sender.domain;var s=function(h,u){if(u.type==="raw")return u.val;if(u.type==="uid")return Fn(h)[u.uid];throw new Error("Unsupported ref type: "+u.type)}(c,i);return{data:t?JSON.parse(s):function(h,u,f){return St(h,u,f,{on:te,send:Gr})}(c,d,s),metaData:a,sender:{win:c,domain:d},reference:i}}var J={STRING:"string",OBJECT:"object",FUNCTION:"function",BOOLEAN:"boolean",NUMBER:"number",ARRAY:"array"},wn={JSON:"json",DOTIFY:"dotify",BASE64:"base64"},Fr=Ze,Y={RENDER:"zoid-render",RENDERED:"zoid-rendered",PRERENDER:"zoid-prerender",PRERENDERED:"zoid-prerendered",DISPLAY:"zoid-display",ERROR:"zoid-error",CLOSE:"zoid-close",DESTROY:"zoid-destroy",PROPS:"zoid-props",RESIZE:"zoid-resize",FOCUS:"zoid-focus"};function Lt(r){return"__zoid__"+r.name+"__"+r.serializedPayload+"__"}function Mn(r){if(!r)throw new Error("No window name");var n=r.split("__"),e=n[1],t=n[2],o=n[3];if(e!=="zoid")throw new Error("Window not rendered by zoid - got "+e);if(!t)throw new Error("Expected component name");if(!o)throw new Error("Expected serialized payload ref");return{name:t,serializedInitialPayload:o}}var Io=ee(function(r){var n=Mt({data:Mn(r).serializedInitialPayload,sender:{win:function(e){return function(t){if(t.type==="opener")return an("opener",Ee(window));if(t.type==="parent"&&typeof t.distance=="number")return an("parent",function(a,c){return c===void 0&&(c=1),function(d,s){s===void 0&&(s=1);for(var h=d,u=0;u<s;u++){if(!h)return;h=Jr(h)}return h}(a,En(a)-c)}(window,t.distance));if(t.type==="global"&&t.uid&&typeof t.uid=="string"){var o=function(){var a=t.uid,c=Ie(window);if(!c)throw new Error("Can not find ancestor window");for(var d=0,s=be(c);d<s.length;d++){var h=s[d];if(hr(h)){var u=At(h,function(f){return f.windows&&f.windows[a]});if(u)return{v:u}}}}();if(typeof o=="object")return o.v}else if(t.type==="name"){var i=t.name;return an("namedWindow",function(a,c){return Xn(a,c)||function d(s,h){var u=Xn(s,h);if(u)return u;for(var f=0,l=Xe(s);f<l.length;f++){var p=d(l[f],h);if(p)return p}}(Pe(a)||a,c)}(an("ancestor",Ie(window)),i))}throw new Error("Unable to find "+t.type+" parent component window")}(e.metaData.windowRef)}}});return{parent:n.sender,payload:n.data,reference:n.reference}});function Ut(){return Io(window.name)}function zo(r,n){if(n===void 0&&(n=window),r===Jr(n))return{type:"parent",distance:En(r)};if(r===Ee(n))return{type:"opener"};if(hr(r)&&(t=r,t!==Pe(t))){var e=Vr(r).name;if(e)return{type:"name",name:e}}var t}function jt(r,n,e,t,o){if(!r.hasOwnProperty(e))return t;var i=r[e];return typeof i.childDecorate=="function"?i.childDecorate({value:t,uid:o.uid,tag:o.tag,close:o.close,focus:o.focus,onError:o.onError,onProps:o.onProps,resize:o.resize,getParent:o.getParent,getParentDomain:o.getParentDomain,show:o.show,hide:o.hide,export:o.export,getSiblings:o.getSiblings}):t}function Ao(){return w.try(function(){window.focus()})}function qt(){return w.try(function(){window.close()})}var Xr=function(){return tr},he=function(r){return en(r.value)};function Ln(r,n,e){for(var t=0,o=Object.keys(lr({},r,n));t<o.length;t++){var i=o[t];e(i,n[i],r[i])}}function Bt(r,n,e){var t={};return w.all(function(o,i,a){var c=[];return Ln(o,i,function(d,s,h){var u=function(f,l,p){return w.resolve().then(function(){var y,P;if(p!=null&&l){var D=(y={},y.get=l.queryParam,y.post=l.bodyParam,y)[e],F=(P={},P.get=l.queryValue,P.post=l.bodyValue,P)[e];if(D)return w.hash({finalParam:w.try(function(){return typeof D=="function"?D({value:p}):typeof D=="string"?D:f}),finalValue:w.try(function(){return typeof F=="function"&&ne(p)?F({value:p}):p})}).then(function(U){var m=U.finalParam,T=U.finalValue,b;if(typeof T=="boolean")b=T.toString();else if(typeof T=="string")b=T.toString();else if(typeof T=="object"&&T!==null){if(l.serialization===wn.JSON)b=JSON.stringify(T);else if(l.serialization===wn.BASE64)b=Cn(JSON.stringify(T));else if(l.serialization===wn.DOTIFY||!l.serialization){b=function $(N,C,or){C===void 0&&(C=""),or===void 0&&(or={}),C=C&&C+".";for(var _ in N)N.hasOwnProperty(_)&&N[_]!=null&&typeof N[_]!="function"&&(N[_]&&Array.isArray(N[_])&&N[_].length&&N[_].every(function(Zr){return typeof Zr!="object"})?or[""+C+_+"[]"]=N[_].join(","):N[_]&&typeof N[_]=="object"?or=$(N[_],""+C+_,or):or[""+C+_]=N[_].toString());return or}(T,f);for(var S=0,x=Object.keys(b);S<x.length;S++){var B=x[S];t[B]=b[B]}return}}else typeof T=="number"&&(b=T.toString());t[m]=b})}})}(d,s,h);c.push(u)}),c}(n,r)).then(function(){return t})}function Ht(r){var n=r.uid,e=r.options,t=r.overrides,o=t===void 0?{}:t,i=r.parentWin,a=i===void 0?window:i,c=e.propsDef,d=e.containerTemplate,s=e.prerenderTemplate,h=e.tag,u=e.name,f=e.attributes,l=e.dimensions,p=e.autoResize,y=e.url,P=e.domain,D=e.exports,F=new w,U=[],m=on(),T={},b={},S={visible:!0},x=o.event?o.event:(B={},$={},N={on:function(v,g){var W=$[v]=$[v]||[];W.push(g);var O=!1;return{cancel:function(){O||(O=!0,W.splice(W.indexOf(g),1))}}},once:function(v,g){var W=N.on(v,function(){W.cancel(),g()});return W},trigger:function(v){for(var g=arguments.length,W=new Array(g>1?g-1:0),O=1;O<g;O++)W[O-1]=arguments[O];var L=$[v],j=[];if(L)for(var K=function(sr){var Z=L[sr];j.push(w.try(function(){return Z.apply(void 0,W)}))},Q=0;Q<L.length;Q++)K(Q);return w.all(j).then(tr)},triggerOnce:function(v){if(B[v])return w.resolve();B[v]=!0;for(var g=arguments.length,W=new Array(g>1?g-1:0),O=1;O<g;O++)W[O-1]=arguments[O];return N.trigger.apply(N,[v].concat(W))},reset:function(){$={}}}),B,$,N,C=o.props?o.props:{},or,_,Zr,Kr,Yr,Qr=o.onError,oe=o.getProxyContainer,ve=o.show,ie=o.hide,qr=o.close,we=o.renderContainer,ae=o.getProxyWindow,pe=o.setProxyWin,me=o.openFrame,ge=o.openPrerenderFrame,M=o.prerender,Mr=o.open,H=o.openPrerender,ir=o.watchForUnload,ar=o.getInternalState,er=o.setInternalState,cr=function(){return w.try(function(){return o.resolveInitPromise?o.resolveInitPromise():F.resolve()})},wr=function(v){return w.try(function(){return o.rejectInitPromise?o.rejectInitPromise(v):F.reject(v)})},dr=function(v){for(var g={},W=0,O=Object.keys(C);W<O.length;W++){var L=O[W],j=c[L];j&&j.sendToChild===!1||j&&j.sameDomain&&!$r(v,X(window))||(g[L]=C[L])}return w.hash(g)},Er=function(){return w.try(function(){return ar?ar():S})},Rr=function(v){return w.try(function(){return er?er(v):S=lr({},S,v)})},Dr=function(){return ae?ae():w.try(function(){var v=C.window;if(v){var g=Le(v);return m.register(function(){return v.close()}),g}return new Ar({send:Gr})})},Br=function(v){return pe?pe(v):w.try(function(){or=v})},Nr=function(){return ve?ve():w.hash({setState:Rr({visible:!0}),showElement:_?_.get().then(Eo):null}).then(tr)},kr=function(){return ie?ie():w.hash({setState:Rr({visible:!1}),showElement:_?_.get().then(vt):null}).then(tr)},je=function(){return typeof y=="function"?y({props:C}):y},ye=function(){return typeof f=="function"?f({props:C}):f},re=function(){return Qn(je())},qe=function(v,g){var W=g.windowName;return me?me(v,{windowName:W}):w.try(function(){if(v===Fr.IFRAME)return vn(lt({attributes:lr({name:W,title:u},ye().iframe)}))})},Oe=function(v){return ge?ge(v):w.try(function(){if(v===Fr.IFRAME)return vn(lt({attributes:lr({name:"__zoid_prerender_frame__"+u+"_"+Or()+"__",title:"prerender__"+u},ye().iframe)}))})},Be=function(v,g,W){return H?H(v,g,W):w.try(function(){if(v===Fr.IFRAME){if(!W)throw new Error("Expected proxy frame to be passed");return W.get().then(function(O){return m.register(function(){return Me(O)}),Sn(O).then(function(L){return Vr(L)}).then(function(L){return Le(L)})})}throw new Error("No render context available for "+v)})},De=function(){return w.try(function(){if(or)return w.all([x.trigger(Y.FOCUS),or.focus()]).then(tr)})},jo=function(){var v=Ue(window);return v.windows=v.windows||{},v.windows[n]=window,m.register(function(){delete v.windows[n]}),n},qo=function(v,g,W,O){if(g===X(window))return{type:"global",uid:jo()};if(v!==window)throw new Error("Can not construct cross-domain window reference for different target window");if(C.window){var L=O.getWindow();if(!L)throw new Error("Can not construct cross-domain window reference for lazy window prop");if(Ie(L)!==window)throw new Error("Can not construct cross-domain window reference for window prop with different ancestor")}if(W===Fr.POPUP)return{type:"opener"};if(W===Fr.IFRAME)return{type:"parent",distance:En(window)};throw new Error("Can not construct window reference for child")},$t=function(v,g){return w.try(function(){Kr=v,Zr=g,cr(),m.register(function(){return g.close.fireAndForget().catch(tr)})})},qn=function(v){var g=v.width,W=v.height;return w.try(function(){x.trigger(Y.RESIZE,{width:g,height:W})})},He=function(v){return w.try(function(){return x.trigger(Y.DESTROY)}).catch(tr).then(function(){return m.all(v)}).then(function(){F.asyncReject(v||new Error("Component destroyed"))})},ue=ee(function(v){return w.try(function(){return qr?Cr(qr.__source__)?void 0:qr():w.try(function(){return x.trigger(Y.CLOSE)}).then(function(){return He(v||new Error("Component closed"))})})}),Gt=function(v,g){var W=g.proxyWin,O=g.proxyFrame,L=g.windowName;return Mr?Mr(v,{proxyWin:W,proxyFrame:O,windowName:L}):w.try(function(){if(v===Fr.IFRAME){if(!O)throw new Error("Expected proxy frame to be passed");return O.get().then(function(j){return Sn(j).then(function(K){return m.register(function(){return Me(j)}),m.register(function(){return function(Q){for(var sr=0,Z=Sr("requestPromises").get(Q,[]);sr<Z.length;sr++)Z[sr].reject(new Error("Window "+(Cr(Q)?"closed":"cleaned up")+" before response")).catch(tr)}(K)}),K})})}throw new Error("No render context available for "+v)}).then(function(j){return W.setWindow(j,{send:Gr}),W.setName(L).then(function(){return W})})},Zt=function(){return w.try(function(){var v=ht(window,"unload",en(function(){He(new Error("Window navigated away"))})),g=kn(a,He,3e3);if(m.register(g.cancel),m.register(v.cancel),ir)return ir()})},Yt=function(v){var g=!1;return v.isClosed().then(function(W){return W?(g=!0,ue(new Error("Detected component window close"))):w.delay(200).then(function(){return v.isClosed()}).then(function(O){if(O)return g=!0,ue(new Error("Detected component window close"))})}).then(function(){return g})},_e=function(v){return Qr?Qr(v):w.try(function(){if(U.indexOf(v)===-1)return U.push(v),F.asyncReject(v),x.trigger(Y.ERROR,v)})},Vt=new w,Xt=function(v){return w.try(function(){Vt.resolve(v)})};$t.onError=_e;var Kt=function(v,g){return v({uid:n,container:g.container,context:g.context,doc:g.doc,frame:g.frame,prerenderFrame:g.prerenderFrame,focus:De,close:ue,state:T,props:C,tag:h,dimensions:typeof l=="function"?l({props:C}):l,event:x})},Qt=function(v,g){var W=g.context;return M?M(v,{context:W}):w.try(function(){if(s){x.trigger(Y.PRERENDER);var O=v.getWindow();if(O&&hr(O)&&function(fr){try{if(!fr.location.href||fr.location.href==="about:blank")return!0}catch{}return!1}(O)){var L=(O=Vr(O)).document,j=Kt(s,{context:W,doc:L});if(j){if(j.ownerDocument!==L)throw new Error("Expected prerender template to have been created with document from child window");(function(fr,k){var Ur=k.tagName.toLowerCase();if(Ur!=="html")throw new Error("Expected element to be html, got "+Ur);for(var mr=fr.document.documentElement,V=0,Tr=Dn(mr.children);V<Tr.length;V++)mr.removeChild(Tr[V]);for(var jr=0,Wr=Dn(k.children);jr<Wr.length;jr++)mr.appendChild(Wr[jr])})(O,j);var K=p.width,Q=K!==void 0&&K,sr=p.height,Z=sr!==void 0&&sr,Pr=p.element,pr=Pr===void 0?"body":Pr;if((pr=cn(pr,L))&&(Q||Z)){var Lr=wt(pr,function(fr){qn({width:Q?fr.width:void 0,height:Z?fr.height:void 0})},{width:Q,height:Z,win:O});x.on(Y.RENDERED,Lr.cancel)}x.trigger(Y.PRERENDERED)}}}})},kt=function(v,g){var W=g.proxyFrame,O=g.proxyPrerenderFrame,L=g.context,j=g.rerender;return we?we(v,{proxyFrame:W,proxyPrerenderFrame:O,context:L,rerender:j}):w.hash({container:v.get(),frame:W?W.get():null,prerenderFrame:O?O.get():null,internalState:Er()}).then(function(K){var Q=K.container,sr=K.internalState.visible,Z=Kt(d,{context:L,container:Q,frame:K.frame,prerenderFrame:K.prerenderFrame,doc:document});if(Z){sr||vt(Z),go(Q,Z);var Pr=function(pr,Lr){Lr=en(Lr);var fr=!1,k=[],Ur,mr,V,Tr=function(){fr=!0;for(var ce=0;ce<k.length;ce++)k[ce].disconnect();Ur&&Ur.cancel(),V&&V.removeEventListener("unload",jr),mr&&Me(mr)},jr=function(){fr||(Lr(),Tr())};if(sn(pr))return jr(),{cancel:Tr};if(window.MutationObserver)for(var Wr=pr.parentElement;Wr;){var Je=new window.MutationObserver(function(){sn(pr)&&jr()});Je.observe(Wr,{childList:!0}),k.push(Je),Wr=Wr.parentElement}return(mr=document.createElement("iframe")).setAttribute("name","__detect_close_"+Or()+"__"),mr.style.display="none",Sn(mr).then(function(ce){(V=Vr(ce)).addEventListener("unload",jr)}),pr.appendChild(mr),Ur=Ae(function(){sn(pr)&&jr()},1e3),{cancel:Tr}}(Z,function(){var pr=new Error("Detected container element removed from DOM");return w.delay(1).then(function(){if(!sn(Z))return m.all(pr),j().then(cr,wr);ue(pr)})});return m.register(function(){return Pr.cancel()}),m.register(function(){return Me(Z)}),_=vn(Z)}})},ro=function(){return{state:T,event:x,close:ue,focus:De,resize:qn,onError:_e,updateProps:Bo,show:Nr,hide:kr}},Bn=function(v){v===void 0&&(v={});var g=Yr,W=ro();tn(b,v),function(O,L,j,K,Q){var sr=K.state,Z=K.close,Pr=K.focus,pr=K.event,Lr=K.onError;Ln(j,O,function(fr,k,Ur){var mr=!1,V=Ur;Object.defineProperty(L,fr,{configurable:!0,enumerable:!0,get:function(){return mr?V:(mr=!0,function(){if(!k)return V;var Tr=k.alias;if(Tr&&!ne(Ur)&&ne(j[Tr])&&(V=j[Tr]),k.value&&(V=k.value({props:L,state:sr,close:Z,focus:Pr,event:pr,onError:Lr,container:Q})),!k.default||ne(V)||ne(j[fr])||(V=k.default({props:L,state:sr,close:Z,focus:Pr,event:pr,onError:Lr,container:Q})),ne(V)){if(k.type===J.ARRAY?!Array.isArray(V):typeof V!==k.type)throw new TypeError("Prop is not of type "+k.type+": "+fr)}else if(k.required!==!1&&!ne(j[fr]))throw new Error('Expected prop "'+fr+'" to be defined');return ne(V)&&k.decorate&&(V=k.decorate({value:V,props:L,state:sr,close:Z,focus:Pr,event:pr,onError:Lr,container:Q})),V}())}})}),Ln(L,O,tr)}(c,C,b,W,g)},Bo=function(v){return Bn(v),F.then(function(){var g=Zr,W=or;if(g&&W&&Kr)return dr(Kr).then(function(O){return g.updateProps(O).catch(function(L){return Yt(W).then(function(j){if(!j)throw L})})})})},eo=function(v){return oe?oe(v):w.try(function(){return st(v)}).then(function(g){return Rn(g)&&(g=function W(O){var L=function(sr){var Z=function(Pr){for(;Pr.parentNode;)Pr=Pr.parentNode;if(Rn(Pr))return Pr}(sr);if(Z&&Z.host)return Z.host}(O);if(!L)throw new Error("Element is not in shadow dom");var j="shadow-slot-"+Or(),K=document.createElement("slot");K.setAttribute("name",j),O.appendChild(K);var Q=document.createElement("div");return Q.setAttribute("slot",j),L.appendChild(Q),Rn(L)?W(Q):Q}(g)),Yr=g,vn(g)})};return{init:function(){(function(){x.on(Y.RENDER,function(){return C.onRender()}),x.on(Y.PRERENDER,function(){return C.onPrerender()}),x.on(Y.DISPLAY,function(){return C.onDisplay()}),x.on(Y.RENDERED,function(){return C.onRendered()}),x.on(Y.PRERENDERED,function(){return C.onPrerendered()}),x.on(Y.CLOSE,function(){return C.onClose()}),x.on(Y.DESTROY,function(){return C.onDestroy()}),x.on(Y.RESIZE,function(){return C.onResize()}),x.on(Y.FOCUS,function(){return C.onFocus()}),x.on(Y.PROPS,function(v){return C.onProps(v)}),x.on(Y.ERROR,function(v){return C&&C.onError?C.onError(v):wr(v).then(function(){setTimeout(function(){throw v},1)})}),m.register(x.reset)})()},render:function(v){var g=v.target,W=v.container,O=v.context,L=v.rerender;return w.try(function(){var j=re(),K=P||re();(function(R,nr,ur){if(R!==window){if(!Kn(window,R))throw new Error("Can only renderTo an adjacent frame");var br=X();if(!$r(nr,br)&&!hr(R))throw new Error("Can not render remotely to "+nr.toString()+" - can only render to "+br);if(ur&&typeof ur!="string")throw new Error("Container passed to renderTo must be a string selector, got "+typeof ur+" }")}})(g,K,W);var Q=w.try(function(){if(g!==window)return function(R,nr){for(var ur={},br=0,Hr=Object.keys(C);br<Hr.length;br++){var xr=Hr[br],de=c[xr];de&&de.allowDelegate&&(ur[xr]=C[xr])}var gr=Gr(nr,"zoid_delegate_"+u,{uid:n,overrides:{props:ur,event:x,close:ue,onError:_e,getInternalState:Er,setInternalState:Rr,resolveInitPromise:cr,rejectInitPromise:wr}}).then(function(I){var z=I.data.parent;return m.register(function(E){if(!Cr(nr))return z.destroy(E)}),z.getDelegateOverrides()}).catch(function(I){throw new Error(`Unable to delegate rendering. Possibly the component is not loaded in the target window.

`+xe(I))});return oe=function(){for(var I=arguments.length,z=new Array(I),E=0;E<I;E++)z[E]=arguments[E];return gr.then(function(A){return A.getProxyContainer.apply(A,z)})},we=function(){for(var I=arguments.length,z=new Array(I),E=0;E<I;E++)z[E]=arguments[E];return gr.then(function(A){return A.renderContainer.apply(A,z)})},ve=function(){for(var I=arguments.length,z=new Array(I),E=0;E<I;E++)z[E]=arguments[E];return gr.then(function(A){return A.show.apply(A,z)})},ie=function(){for(var I=arguments.length,z=new Array(I),E=0;E<I;E++)z[E]=arguments[E];return gr.then(function(A){return A.hide.apply(A,z)})},ir=function(){for(var I=arguments.length,z=new Array(I),E=0;E<I;E++)z[E]=arguments[E];return gr.then(function(A){return A.watchForUnload.apply(A,z)})},R===Fr.IFRAME&&(ae=function(){for(var I=arguments.length,z=new Array(I),E=0;E<I;E++)z[E]=arguments[E];return gr.then(function(A){return A.getProxyWindow.apply(A,z)})},me=function(){for(var I=arguments.length,z=new Array(I),E=0;E<I;E++)z[E]=arguments[E];return gr.then(function(A){return A.openFrame.apply(A,z)})},ge=function(){for(var I=arguments.length,z=new Array(I),E=0;E<I;E++)z[E]=arguments[E];return gr.then(function(A){return A.openPrerenderFrame.apply(A,z)})},M=function(){for(var I=arguments.length,z=new Array(I),E=0;E<I;E++)z[E]=arguments[E];return gr.then(function(A){return A.prerender.apply(A,z)})},Mr=function(){for(var I=arguments.length,z=new Array(I),E=0;E<I;E++)z[E]=arguments[E];return gr.then(function(A){return A.open.apply(A,z)})},H=function(){for(var I=arguments.length,z=new Array(I),E=0;E<I;E++)z[E]=arguments[E];return gr.then(function(A){return A.openPrerender.apply(A,z)})}),gr}(O,g)}),sr=C.window,Z=Zt(),Pr=Bt(c,C,"post"),pr=x.trigger(Y.RENDER),Lr=eo(W),fr=Dr(),k=Lr.then(function(){return Bn()}),Ur=k.then(function(){return Bt(c,C,"get").then(function(R){return function(nr,ur){var br=ur.query||{},Hr=ur.hash||{},xr,de,gr=nr.split("#");de=gr[1];var I=(xr=gr[0]).split("?");xr=I[0];var z=dt(I[1],br),E=dt(de,Hr);return z&&(xr=xr+"?"+z),E&&(xr=xr+"#"+E),xr}(function(nr){if(ur=Qn(nr),ur.indexOf("mock:")!==0)return nr;var ur;throw new Error("Mock urls not supported out of test mode")}(je()),{query:R})})}),mr=fr.then(function(R){return function(ur){var br=ur===void 0?{}:ur,Hr=br.proxyWin,xr=br.initialChildDomain,de=br.childDomainMatch,gr=br.target,I=gr===void 0?window:gr,z=br.context;return function(E){var A=E===void 0?{}:E,_n=A.proxyWin,Yo=A.childDomainMatch,Vo=A.context;return dr(A.initialChildDomain).then(function(Xo){return{uid:n,context:Vo,tag:h,childDomainMatch:Yo,version:"10_0_1",props:Xo,exports:(oo=_n,{init:function(Ko){return $t(this.origin,Ko)},close:ue,checkClose:function(){return Yt(oo)},resize:qn,onError:_e,show:Nr,hide:kr,export:Xt})};var oo})}({proxyWin:Hr,initialChildDomain:xr,childDomainMatch:de,context:z}).then(function(E){var A=Ft({data:E,metaData:{windowRef:qo(I,xr,z,Hr)},sender:{domain:X(window)},receiver:{win:Hr,domain:de},passByReference:xr===X()}),_n=A.serializedData;return m.register(A.cleanReference),_n})}({proxyWin:(nr={proxyWin:R,initialChildDomain:j,childDomainMatch:K,target:g,context:O}).proxyWin,initialChildDomain:nr.initialChildDomain,childDomainMatch:nr.childDomainMatch,target:nr.target,context:nr.context}).then(function(ur){return Lt({name:u,serializedPayload:ur})});var nr}),V=mr.then(function(R){return qe(O,{windowName:R})}),Tr=Oe(O),jr=w.hash({proxyContainer:Lr,proxyFrame:V,proxyPrerenderFrame:Tr}).then(function(R){return kt(R.proxyContainer,{context:O,proxyFrame:R.proxyFrame,proxyPrerenderFrame:R.proxyPrerenderFrame,rerender:L})}).then(function(R){return R}),Wr=w.hash({windowName:mr,proxyFrame:V,proxyWin:fr}).then(function(R){var nr=R.proxyWin;return sr?nr:Gt(O,{windowName:R.windowName,proxyWin:nr,proxyFrame:R.proxyFrame})}),Je=w.hash({proxyWin:Wr,proxyPrerenderFrame:Tr}).then(function(R){return Be(O,R.proxyWin,R.proxyPrerenderFrame)}),ce=Wr.then(function(R){return or=R,Br(R)}),Hn=w.hash({proxyPrerenderWin:Je,state:ce}).then(function(R){return Qt(R.proxyPrerenderWin,{context:O})}),no=w.hash({proxyWin:Wr,windowName:mr}).then(function(R){if(sr)return R.proxyWin.setName(R.windowName)}),Ho=w.hash({body:Pr}).then(function(R){return e.method?e.method:Object.keys(R.body).length?"post":"get"}),to=w.hash({proxyWin:Wr,windowUrl:Ur,body:Pr,method:Ho,windowName:no,prerender:Hn}).then(function(R){return R.proxyWin.setLocation(R.windowUrl,{method:R.method,body:R.body})}),_o=Wr.then(function(R){(function nr(ur,br){var Hr=!1;return m.register(function(){Hr=!0}),w.delay(2e3).then(function(){return ur.isClosed()}).then(function(xr){if(!Hr)return xr?ue(new Error("Detected "+br+" close")):nr(ur,br)})})(R,O)}),Jo=w.hash({container:jr,prerender:Hn}).then(function(){return x.trigger(Y.DISPLAY)}),$o=Wr.then(function(R){}),Go=to.then(function(){return w.try(function(){var R=C.timeout;if(R)return F.timeout(R,new Error("Loading component timed out after "+R+" milliseconds"))})}),Zo=F.then(function(){return x.trigger(Y.RENDERED)});return w.hash({initPromise:F,buildUrlPromise:Ur,onRenderPromise:pr,getProxyContainerPromise:Lr,openFramePromise:V,openPrerenderFramePromise:Tr,renderContainerPromise:jr,openPromise:Wr,openPrerenderPromise:Je,setStatePromise:ce,prerenderPromise:Hn,loadUrlPromise:to,buildWindowNamePromise:mr,setWindowNamePromise:no,watchForClosePromise:_o,onDisplayPromise:Jo,openBridgePromise:$o,runTimeoutPromise:Go,onRenderedPromise:Zo,delegatePromise:Q,watchForUnloadPromise:Z,finalSetPropsPromise:k})}).catch(function(j){return w.all([_e(j),He(j)]).then(function(){throw j},function(){throw j})}).then(tr)},destroy:He,getProps:function(){return C},setProps:Bn,export:Xt,getHelpers:ro,getDelegateOverrides:function(){return w.try(function(){return{getProxyContainer:eo,show:Nr,hide:kr,renderContainer:kt,getProxyWindow:Dr,watchForUnload:Zt,openFrame:qe,openPrerenderFrame:Oe,prerender:Qt,open:Gt,openPrerender:Be,setProxyWin:Br}})},getExports:function(){return D({getExports:function(){return Vt}})}}}function Fo(r){var n=r.uid,e=r.frame,t=r.prerenderFrame,o=r.doc,i=r.props,a=r.event,c=r.dimensions,d=c.width,s=c.height;if(e&&t){var h=o.createElement("div");h.setAttribute("id",n);var u=o.createElement("style");return i.cspNonce&&u.setAttribute("nonce",i.cspNonce),u.appendChild(o.createTextNode(`
            #`+n+` {
                display: inline-block;
                position: relative;
                width: `+d+`;
                height: `+s+`;
            }

            #`+n+` > iframe {
                display: inline-block;
                position: absolute;
                width: 100%;
                height: 100%;
                top: 0;
                left: 0;
                transition: opacity .2s ease-in-out;
            }

            #`+n+` > iframe.zoid-invisible {
                opacity: 0;
            }

            #`+n+` > iframe.zoid-visible {
                opacity: 1;
        }
        `)),h.appendChild(e),h.appendChild(t),h.appendChild(u),t.classList.add("zoid-visible"),e.classList.add("zoid-invisible"),a.on(Y.RENDERED,function(){t.classList.remove("zoid-visible"),t.classList.add("zoid-invisible"),e.classList.remove("zoid-invisible"),e.classList.add("zoid-visible"),setTimeout(function(){Me(t)},1)}),a.on(Y.RESIZE,function(f){var l=f.width,p=f.height;typeof l=="number"&&(h.style.width=mt(l)),typeof p=="number"&&(h.style.height=mt(p))}),h}}var Un=on(),jn=on();function Mo(r){var n=function(u){var f=u.tag,l=u.url,p=u.domain,y=u.bridgeUrl,P=u.props,D=P===void 0?{}:P,F=u.dimensions,U=F===void 0?{}:F,m=u.autoResize,T=m===void 0?{}:m,b=u.allowedParentDomains,S=b===void 0?"*":b,x=u.attributes,B=x===void 0?{}:x,$=u.defaultContext,N=$===void 0?Fr.IFRAME:$,C=u.containerTemplate,or=C===void 0?Fo:C,_=u.prerenderTemplate,Zr=_===void 0?null:_,Kr=u.validate,Yr=u.eligible,Qr=Yr===void 0?function(){return{eligible:!0}}:Yr,oe=u.logger,ve=oe===void 0?{info:tr}:oe,ie=u.exports,qr=ie===void 0?tr:ie,we=u.method,ae=u.children,pe=ae===void 0?function(){return{}}:ae,me=f.replace(/-/g,"_"),ge=lr({},{window:{type:J.OBJECT,sendToChild:!1,required:!1,allowDelegate:!0,validate:function(M){var Mr=M.value;if(!fe(Mr)&&!Ar.isProxyWindow(Mr))throw new Error("Expected Window or ProxyWindow");if(fe(Mr)){if(Cr(Mr))throw new Error("Window is closed");if(!hr(Mr))throw new Error("Window is not same domain")}},decorate:function(M){return Le(M.value)}},timeout:{type:J.NUMBER,required:!1,sendToChild:!1},cspNonce:{type:J.STRING,required:!1},onDisplay:{type:J.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:Xr,decorate:he},onRendered:{type:J.FUNCTION,required:!1,sendToChild:!1,default:Xr,decorate:he},onRender:{type:J.FUNCTION,required:!1,sendToChild:!1,default:Xr,decorate:he},onPrerendered:{type:J.FUNCTION,required:!1,sendToChild:!1,default:Xr,decorate:he},onPrerender:{type:J.FUNCTION,required:!1,sendToChild:!1,default:Xr,decorate:he},onClose:{type:J.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:Xr,decorate:he},onDestroy:{type:J.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:Xr,decorate:he},onResize:{type:J.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:Xr},onFocus:{type:J.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:Xr},close:{type:J.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(M){return M.close}},focus:{type:J.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(M){return M.focus}},resize:{type:J.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(M){return M.resize}},uid:{type:J.STRING,required:!1,sendToChild:!1,childDecorate:function(M){return M.uid}},tag:{type:J.STRING,required:!1,sendToChild:!1,childDecorate:function(M){return M.tag}},getParent:{type:J.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(M){return M.getParent}},getParentDomain:{type:J.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(M){return M.getParentDomain}},show:{type:J.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(M){return M.show}},hide:{type:J.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(M){return M.hide}},export:{type:J.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(M){return M.export}},onError:{type:J.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(M){return M.onError}},onProps:{type:J.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(M){return M.onProps}},getSiblings:{type:J.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(M){return M.getSiblings}}},D);if(!or)throw new Error("Container template required");return{name:me,tag:f,url:l,domain:p,bridgeUrl:y,method:we,propsDef:ge,dimensions:U,autoResize:T,allowedParentDomains:S,attributes:B,defaultContext:N,containerTemplate:or,prerenderTemplate:Zr,validate:Kr,logger:ve,eligible:Qr,children:pe,exports:typeof qr=="function"?qr:function(M){for(var Mr=M.getExports,H={},ir=function(cr,wr){var dr=wr[cr],Er=qr[dr].type,Rr=Mr().then(function(Dr){return Dr[dr]});H[dr]=Er===J.FUNCTION?function(){for(var Dr=arguments.length,Br=new Array(Dr),Nr=0;Nr<Dr;Nr++)Br[Nr]=arguments[Nr];return Rr.then(function(kr){return kr.apply(void 0,Br)})}:Rr},ar=0,er=Object.keys(qr);ar<er.length;ar++)ir(ar,er);return H}}}(r),e=n.name,t=n.tag,o=n.defaultContext,i=n.eligible,a=n.children,c=Ue(window),d=[],s=function(){if(function(f){try{return Mn(window.name).name===f}catch{}return!1}(e)){var u=Ut().payload;if(u.tag===t&&$r(u.childDomainMatch,X()))return!0}return!1},h=ee(function(){if(s()){if(window.xprops)throw delete c.components[t],new Error("Can not register "+e+" as child - child already registered");var u=function(f){var l=f.tag,p=f.propsDef,y=f.autoResize,P=f.allowedParentDomains,D=[],F=Ut(),U=F.parent,m=F.payload,T=U.win,b=U.domain,S,x=new w,B=m.version,$=m.uid,N=m.exports,C=m.context,or=m.props;if(B!=="10_0_1")throw new Error("Parent window has zoid version "+B+", child window has version 10_0_1");var _=N.show,Zr=N.hide,Kr=N.close,Yr=N.onError,Qr=N.checkClose,oe=N.export,ve=N.resize,ie=N.init,qr=function(){return T},we=function(){return b},ae=function(H){return D.push(H),{cancel:function(){D.splice(D.indexOf(H),1)}}},pe=function(H){return ve.fireAndForget({width:H.width,height:H.height})},me=function(H){return x.resolve(H),oe(H)},ge=function(H){var ir=(H===void 0?{}:H).anyParent,ar=[],er=S.parent;if(ir===void 0&&(ir=!er),!ir&&!er)throw new Error("No parent found for "+l+" child");for(var cr=0,wr=be(window);cr<wr.length;cr++){var dr=wr[cr];if(hr(dr)){var Er=Vr(dr).xprops;if(Er&&qr()===Er.getParent()){var Rr=Er.parent;if(ir||!er||Rr&&Rr.uid===er.uid){var Dr=At(dr,function(Br){return Br.exports});ar.push({props:Er,exports:Dr})}}}}return ar},M=function(H,ir,ar){ar===void 0&&(ar=!1);var er=function(wr,dr,Er,Rr,Dr,Br){Br===void 0&&(Br=!1);for(var Nr={},kr=0,je=Object.keys(Er);kr<je.length;kr++){var ye=je[kr],re=dr[ye];if(!re||!re.sameDomain||Rr===X(window)&&hr(wr)){var qe=jt(dr,0,ye,Er[ye],Dr);Nr[ye]=qe,re&&re.alias&&!Nr[re.alias]&&(Nr[re.alias]=qe)}}if(!Br)for(var Oe=0,Be=Object.keys(dr);Oe<Be.length;Oe++){var De=Be[Oe];Er.hasOwnProperty(De)||(Nr[De]=jt(dr,0,De,void 0,Dr))}return Nr}(T,p,H,ir,{tag:l,show:_,hide:Zr,close:Kr,focus:Ao,onError:Yr,resize:pe,getSiblings:ge,onProps:ae,getParent:qr,getParentDomain:we,uid:$,export:me},ar);S?tn(S,er):S=er;for(var cr=0;cr<D.length;cr++)(0,D[cr])(S)},Mr=function(H){return w.try(function(){return M(H,b,!0)})};return{init:function(){return w.try(function(){return hr(T)&&function(H){var ir=H.componentName,ar=H.parentComponentWindow,er=Mt({data:Mn(window.name).serializedInitialPayload,sender:{win:ar},basic:!0}),cr=er.sender;if(er.reference.type==="uid"||er.metaData.windowRef.type==="global"){var wr=Ft({data:er.data,metaData:{windowRef:zo(ar)},sender:{domain:cr.domain},receiver:{win:window,domain:X()},basic:!0});window.name=Lt({name:ir,serializedPayload:wr.serializedData})}}({componentName:f.name,parentComponentWindow:T}),Ue(window).exports=f.exports({getExports:function(){return x}}),function(H,ir){if(!$r(H,ir))throw new Error("Can not be rendered by domain: "+ir)}(P,b),bt(T),function(){window.addEventListener("beforeunload",function(){Qr.fireAndForget()}),window.addEventListener("unload",function(){Qr.fireAndForget()}),kn(T,function(){qt()})}(),ie({updateProps:Mr,close:qt})}).then(function(){return(H=y.width,ir=H!==void 0&&H,ar=y.height,er=ar!==void 0&&ar,cr=y.element,st(cr===void 0?"body":cr).catch(tr).then(function(wr){return{width:ir,height:er,element:wr}})).then(function(wr){var dr=wr.width,Er=wr.height,Rr=wr.element;Rr&&(dr||Er)&&C!==Fr.POPUP&&wt(Rr,function(Dr){pe({width:dr?Dr.width:void 0,height:Er?Dr.height:void 0})},{width:dr,height:Er})});var H,ir,ar,er,cr}).catch(function(H){Yr(H)})},getProps:function(){return S||(M(or,b),S)}}}(n);return u.init(),u}});if(h(),function(){var u=te("zoid_allow_delegate_"+e,function(){return!0}),f=te("zoid_delegate_"+e,function(l){var p=l.data;return{parent:Ht({uid:p.uid,options:n,overrides:p.overrides,parentWin:l.source})}});jn.register(u.cancel),jn.register(f.cancel)}(),c.components=c.components||{},c.components[t])throw new Error("Can not register multiple components with the same tag: "+t);return c.components[t]=!0,{init:function u(f){var l,p="zoid-"+t+"-"+Or(),y=f||{},P=i({props:y}),D=P.eligible,F=P.reason,U=y.onDestroy;y.onDestroy=function(){if(l&&D&&d.splice(d.indexOf(l),1),U)return U.apply(void 0,arguments)};var m=Ht({uid:p,options:n});m.init(),D?m.setProps(y):y.onDestroy&&y.onDestroy(),Un.register(function(S){return m.destroy(S||new Error("zoid destroyed all components"))});var T=function(S){var x=(S===void 0?{}:S).decorate;return u((x===void 0?po:x)(y))},b=function(S,x,B){return w.try(function(){if(!D){var $=new Error(F||e+" component is not eligible");return m.destroy($).then(function(){throw $})}if(!fe(S))throw new Error("Must pass window to renderTo");return function(N,C){return w.try(function(){if(N.window)return Le(N.window).getType();if(C){if(C!==Fr.IFRAME&&C!==Fr.POPUP)throw new Error("Unrecognized context: "+C);return C}return o})}(y,B)}).then(function($){if(x=function(N,C){if(C){if(typeof C!="string"&&!Pn(C))throw new TypeError("Expected string or element selector to be passed");return C}if(N===Fr.POPUP)return"body";throw new Error("Expected element to be passed to render iframe")}($,x),S!==window&&typeof x!="string")throw new Error("Must pass string element when rendering to another window");return m.render({target:S,container:x,context:$,rerender:function(){var N=T();return tn(l,N),N.renderTo(S,x,B)}})}).catch(function($){return m.destroy($).then(function(){throw $})})};return l=lr({},m.getExports(),m.getHelpers(),function(){for(var S=a(),x={},B=function(C,or){var _=or[C],Zr=S[_];x[_]=function(Kr){var Yr=m.getProps(),Qr=lr({},Kr,{parent:{uid:p,props:Yr,export:m.export}});return Zr(Qr)}},$=0,N=Object.keys(S);$<N.length;$++)B($,N);return x}(),{isEligible:function(){return D},clone:T,render:function(S,x){return b(window,S,x)},renderTo:function(S,x,B){return b(S,x,B)}}),D&&d.push(l),l},instances:d,driver:function(u,f){throw new Error("Driver support not enabled")},isChild:s,canRenderTo:function(u){return Gr(u,"zoid_allow_delegate_"+e).then(function(f){return f.data}).catch(function(){return!1})},registerChild:h}}var Lo=function(r){(function(){Ce().initialized||(Ce().initialized=!0,i=(o={on:te,send:Gr}).on,a=o.send,(c=Ce()).receiveMessage=c.receiveMessage||function(d){return zt(d,{on:i,send:a})},function(d){var s=d.on,h=d.send;vr().getOrSet("postMessageListener",function(){return ht(window,"message",function(u){(function(f,l){var p=l.on,y=l.send;w.try(function(){var P=f.source||f.sourceElement,D=f.origin||f.originalEvent&&f.originalEvent.origin,F=f.data;if(D==="null"&&(D="file://"),P){if(!D)throw new Error("Post message did not have origin domain");zt({source:P,origin:D,data:F},{on:p,send:y})}})})(u,{on:s,send:h})})})}({on:te,send:Gr}),function(d){var s=d.on,h=d.send;vr("builtinListeners").getOrSet("helloListener",function(){var u=s("postrobot_hello",{domain:"*"},function(l){return Et(l.source,{domain:l.origin}),{instanceID:yt()}}),f=Ie();return f&&Nn(f,{send:h}).catch(function(l){}),u})}({on:te,send:Gr}));var o,i,a,c})();var n=Mo(r),e=function(o){return n.init(o)};e.driver=function(o,i){return n.driver(o,i)},e.isChild=function(){return n.isChild()},e.canRenderTo=function(o){return n.canRenderTo(o)},e.instances=n.instances;var t=n.registerChild();return t&&(window.xprops=e.xprops=t.getProps()),e};function _t(r){var n=Un.all(r);return Un=on(),n}var Jt=_t;function Uo(r){return Jt(),delete window.__zoid_10_0_1__,function(){(function(){for(var e=vr("responseListeners"),t=0,o=e.keys();t<o.length;t++){var i=o[t],a=e.get(i);a&&(a.cancelled=!0),e.del(i)}})(),(n=vr().get("postMessageListener"))&&n.cancel();var n;delete window.__post_robot_11_0_0__}(),jn.all(r)}}])})})(Jn);const ao="https://localhost:44300",uo="https://localhost:3000",co="test-business-unit",so=Jn.exports.create({tag:"iframe-widget",url:`${ao}/embedded/${co}/payment-source`,domain:uo,dimensions:{width:"500px",height:"700px"},autoResize:{width:!1,height:!1}});window.__MyComponent__=so})();
